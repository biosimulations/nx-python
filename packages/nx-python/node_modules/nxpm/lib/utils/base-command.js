"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const command_1 = require("@oclif/command");
const fs_extra_1 = require("fs-extra");
const path_1 = require("path");
const config_utils_1 = require("../lib/config/utils/config-utils");
const user_config_1 = require("./user-config");
class BaseCommand extends command_1.Command {
    constructor() {
        super(...arguments);
        this.configFile = path_1.join(this.config.configDir, 'config.json');
        this.userConfig = user_config_1.defaultUserConfig;
    }
    async init() {
        if (!(await fs_extra_1.pathExists(this.configFile))) {
            if (!(await fs_extra_1.pathExists(this.config.configDir))) {
                await fs_extra_1.mkdirp(this.config.configDir);
            }
            await config_utils_1.updateConfigFile(this.config, user_config_1.defaultUserConfig);
        }
        this.userConfig = await fs_extra_1.readJSON(this.configFile);
    }
}
exports.BaseCommand = BaseCommand;
